/**
 * Golden Dataset ì‹œë“œ ë°ì´í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸
 * ARK NOVA ë£°ë¶ ê¸°ë°˜ ê³ í’ˆì§ˆ ì§ˆë¬¸-ë‹µë³€ ìŒì„ ìƒì„±í•©ë‹ˆë‹¤.
 */

const { createClient } = require('@supabase/supabase-js');
require('dotenv').config();

// í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
const requiredEnvVars = [
  'NEXT_PUBLIC_SUPABASE_URL',
  'SUPABASE_SERVICE_ROLE_KEY'
];

for (const envVar of requiredEnvVars) {
  if (!process.env[envVar]) {
    console.error(`âŒ í™˜ê²½ ë³€ìˆ˜ ${envVar}ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.`);
    process.exit(1);
  }
}

// Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL,
  process.env.SUPABASE_SERVICE_ROLE_KEY
);

// Golden Dataset ìƒ˜í”Œ ë°ì´í„°
const GOLDEN_DATASET = [
  {
    game_id: 'ARK_NOVA',
    question: 'ARK NOVA ê²Œì„ì˜ ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
    ideal_answer: 'ARK NOVAì˜ ëª©í‘œëŠ” ë™ë¬¼ì›ì„ ìš´ì˜í•˜ì—¬ ê°€ì¥ ë§ì€ ì ìˆ˜ë¥¼ ì–»ëŠ” ê²ƒì…ë‹ˆë‹¤. ì ìˆ˜ëŠ” ì–´í•„ í¬ì¸íŠ¸(Appeal Points)ì™€ ë³´ì¡´ í¬ì¸íŠ¸(Conservation Points)ë¥¼ í†µí•´ íšë“í•  ìˆ˜ ìˆìœ¼ë©°, ê²Œì„ ì¢…ë£Œ ì‹œ ë‘ ì ìˆ˜ ì¤‘ ë‚®ì€ ì ìˆ˜ê°€ ìµœì¢… ì ìˆ˜ê°€ ë©ë‹ˆë‹¤.',
    ideal_context: [
      'ARK NOVAëŠ” ë™ë¬¼ì› í…Œë§ˆì˜ ì „ëµ ë³´ë“œê²Œì„ì…ë‹ˆë‹¤.',
      'í”Œë ˆì´ì–´ëŠ” ë™ë¬¼ì›ì„ ê±´ì„¤í•˜ê³  ìš´ì˜í•˜ì—¬ ì ìˆ˜ë¥¼ íšë“í•©ë‹ˆë‹¤.',
      'ì–´í•„ í¬ì¸íŠ¸ì™€ ë³´ì¡´ í¬ì¸íŠ¸ ë‘ ê°€ì§€ ì ìˆ˜ íŠ¸ë™ì´ ìˆìŠµë‹ˆë‹¤.',
      'ê²Œì„ ì¢…ë£Œ ì‹œ ë‘ ì ìˆ˜ ì¤‘ ë‚®ì€ ì ìˆ˜ê°€ ìµœì¢… ì ìˆ˜ê°€ ë©ë‹ˆë‹¤.'
    ],
    category: 'game_objective',
    difficulty_level: 'easy',
    tags: ['ëª©í‘œ', 'ì ìˆ˜', 'ì–´í•„í¬ì¸íŠ¸', 'ë³´ì¡´í¬ì¸íŠ¸']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ì•¡ì…˜ ì¹´ë“œëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?',
    ideal_answer: 'ì•¡ì…˜ ì¹´ë“œëŠ” í”Œë ˆì´ì–´ì˜ í„´ì— í•˜ë‚˜ì”© ì„ íƒí•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤. ê° ì•¡ì…˜ ì¹´ë“œëŠ” ê³ ìœ í•œ íš¨ê³¼ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ì‚¬ìš© í›„ì—ëŠ” ì¹´ë“œì˜ ê°•ë„ê°€ ê°ì†Œí•©ë‹ˆë‹¤. ì¹´ë“œë¥¼ ì‚¬ìš©í•œ í›„ì—ëŠ” í•´ë‹¹ ì¹´ë“œë¥¼ ë§¨ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³ , ë‚˜ë¨¸ì§€ ì¹´ë“œë“¤ì„ ì™¼ìª½ìœ¼ë¡œ í•œ ì¹¸ì”© ì´ë™ì‹œí‚µë‹ˆë‹¤.',
    ideal_context: [
      'ê° í”Œë ˆì´ì–´ëŠ” 5ì¥ì˜ ì•¡ì…˜ ì¹´ë“œë¥¼ ê°€ì§€ê³  ì‹œì‘í•©ë‹ˆë‹¤.',
      'í„´ë§ˆë‹¤ í•˜ë‚˜ì˜ ì•¡ì…˜ ì¹´ë“œë¥¼ ì„ íƒí•˜ì—¬ ì‹¤í–‰í•©ë‹ˆë‹¤.',
      'ì•¡ì…˜ ì¹´ë“œì˜ ìœ„ì¹˜ì— ë”°ë¼ ê°•ë„ê°€ ê²°ì •ë©ë‹ˆë‹¤.',
      'ì‚¬ìš©ëœ ì¹´ë“œëŠ” ë§¨ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•˜ê³  ê°•ë„ê°€ 0ì´ ë©ë‹ˆë‹¤.'
    ],
    category: 'game_mechanics',
    difficulty_level: 'easy',
    tags: ['ì•¡ì…˜ì¹´ë“œ', 'í„´', 'ê°•ë„', 'ì¹´ë“œì´ë™']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ë™ë¬¼ ì¹´ë“œë¥¼ ë°°ì¹˜í•  ë•Œ ì£¼ì˜í•´ì•¼ í•  ì ì€ ë¬´ì—‡ì¸ê°€ìš”?',
    ideal_answer: 'ë™ë¬¼ ì¹´ë“œë¥¼ ë°°ì¹˜í•  ë•ŒëŠ” ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤: 1) ë™ë¬¼ì˜ í¬ê¸°ì— ë§ëŠ” ì¸í´ë¡œì €ê°€ í•„ìš”í•©ë‹ˆë‹¤. 2) ë™ë¬¼ì˜ ì„œì‹ì§€ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤. 3) ì¼ë¶€ ë™ë¬¼ì€ íŠ¹ë³„í•œ ë°°ì¹˜ ì¡°ê±´ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 4) ì¸í´ë¡œì €ì˜ í¬ê¸°ì™€ ë™ë¬¼ì˜ í¬ê¸°ê°€ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.',
    ideal_context: [
      'ë™ë¬¼ ì¹´ë“œì—ëŠ” í¬ê¸°ì™€ ì„œì‹ì§€ ì •ë³´ê°€ í‘œì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
      'ì¸í´ë¡œì €ëŠ” ë™ë¬¼ì˜ í¬ê¸°ì— ë§ê²Œ ê±´ì„¤ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.',
      'ì„œì‹ì§€ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ ë™ë¬¼ì„ ë°°ì¹˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
      'ì¼ë¶€ ë™ë¬¼ì€ íŠ¹ë³„í•œ ë°°ì¹˜ ê·œì¹™ì´ ì ìš©ë©ë‹ˆë‹¤.'
    ],
    category: 'animal_placement',
    difficulty_level: 'medium',
    tags: ['ë™ë¬¼ì¹´ë“œ', 'ì¸í´ë¡œì €', 'ì„œì‹ì§€', 'ë°°ì¹˜ê·œì¹™']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ìŠ¤í°ì„œ ì¹´ë“œì˜ íš¨ê³¼ëŠ” ì–¸ì œ ì ìš©ë˜ë‚˜ìš”?',
    ideal_answer: 'ìŠ¤í°ì„œ ì¹´ë“œì˜ íš¨ê³¼ëŠ” ì¹´ë“œë¥¼ íšë“í•˜ëŠ” ì¦‰ì‹œ ì ìš©ë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ìŠ¤í°ì„œ ì¹´ë“œëŠ” ì¦‰ì‹œ íš¨ê³¼ë¥¼ ì œê³µí•˜ë©°, ì¼ë¶€ëŠ” ê²Œì„ ì¢…ë£Œê¹Œì§€ ì§€ì†ë˜ëŠ” ì˜êµ¬ íš¨ê³¼ë¥¼ ê°€ì§‘ë‹ˆë‹¤. ìŠ¤í°ì„œ ì¹´ë“œëŠ” ë³´ì¡´ í”„ë¡œì íŠ¸ë¥¼ ì™„ë£Œí•˜ê±°ë‚˜ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•  ë•Œ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    ideal_context: [
      'ìŠ¤í°ì„œ ì¹´ë“œëŠ” ì¦‰ì‹œ íš¨ê³¼ì™€ ì˜êµ¬ íš¨ê³¼ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤.',
      'ì¹´ë“œ íšë“ ì‹œ ì¦‰ì‹œ íš¨ê³¼ê°€ ì ìš©ë©ë‹ˆë‹¤.',
      'ì˜êµ¬ íš¨ê³¼ëŠ” ê²Œì„ ì¢…ë£Œê¹Œì§€ ì§€ì†ë©ë‹ˆë‹¤.',
      'ë³´ì¡´ í”„ë¡œì íŠ¸ ì™„ë£Œ ì‹œ ìŠ¤í°ì„œ ì¹´ë“œë¥¼ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
    ],
    category: 'sponsor_cards',
    difficulty_level: 'medium',
    tags: ['ìŠ¤í°ì„œì¹´ë“œ', 'ì¦‰ì‹œíš¨ê³¼', 'ì˜êµ¬íš¨ê³¼', 'ë³´ì¡´í”„ë¡œì íŠ¸']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ë¸Œë ˆì´í¬ í† í°ì€ ì–´ë–¤ ì—­í• ì„ í•˜ë‚˜ìš”?',
    ideal_answer: 'ë¸Œë ˆì´í¬ í† í°ì€ ê²Œì„ì˜ ì¢…ë£Œ ì¡°ê±´ê³¼ ê´€ë ¨ëœ ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤. í”Œë ˆì´ì–´ê°€ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ë¸Œë ˆì´í¬ í† í°ì„ íšë“í•˜ê³ , ì´ëŠ” ê²Œì„ ì¢…ë£Œë¥¼ ì•ë‹¹ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¸Œë ˆì´í¬ í† í°ì„ ê°€ì§„ í”Œë ˆì´ì–´ëŠ” ì¶”ê°€ ì ìˆ˜ë¥¼ ì–»ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.',
    ideal_context: [
      'ë¸Œë ˆì´í¬ í† í°ì€ ê²Œì„ ì¢…ë£Œ ì¡°ê±´ê³¼ ì—°ê´€ë©ë‹ˆë‹¤.',
      'íŠ¹ì • ì¡°ê±´ ë‹¬ì„± ì‹œ ë¸Œë ˆì´í¬ í† í°ì„ íšë“í•©ë‹ˆë‹¤.',
      'ë¸Œë ˆì´í¬ í† í°ì€ ê²Œì„ ì¢…ë£Œë¥¼ ì´‰ì§„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ë¸Œë ˆì´í¬ í† í° ë³´ìœ ìëŠ” ì¶”ê°€ í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
    ],
    category: 'game_mechanics',
    difficulty_level: 'hard',
    tags: ['ë¸Œë ˆì´í¬í† í°', 'ê²Œì„ì¢…ë£Œ', 'ì¢…ë£Œì¡°ê±´', 'ì¶”ê°€ì ìˆ˜']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ë³´ì¡´ í”„ë¡œì íŠ¸ëŠ” ì–´ë–»ê²Œ ì™„ë£Œí•˜ë‚˜ìš”?',
    ideal_answer: 'ë³´ì¡´ í”„ë¡œì íŠ¸ë¥¼ ì™„ë£Œí•˜ë ¤ë©´ ì¹´ë“œì— ëª…ì‹œëœ ìš”êµ¬ì‚¬í•­ì„ ëª¨ë‘ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ íŠ¹ì • ëŒ€ë¥™ì˜ ë™ë¬¼ë“¤ì´ë‚˜ íŠ¹ì • ì•„ì´ì½˜ì„ ê°€ì§„ ë™ë¬¼ë“¤ì„ ë™ë¬¼ì›ì— ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì™„ë£Œ ì‹œ ë³´ì¡´ í¬ì¸íŠ¸ì™€ ìŠ¤í°ì„œ ì¹´ë“œë¥¼ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    ideal_context: [
      'ë³´ì¡´ í”„ë¡œì íŠ¸ ì¹´ë“œì—ëŠ” ì™„ë£Œ ì¡°ê±´ì´ ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
      'ëŒ€ë¶€ë¶„ íŠ¹ì • ë™ë¬¼ë“¤ì˜ ë°°ì¹˜ê°€ ìš”êµ¬ë©ë‹ˆë‹¤.',
      'í”„ë¡œì íŠ¸ ì™„ë£Œ ì‹œ ë³´ì¡´ í¬ì¸íŠ¸ë¥¼ íšë“í•©ë‹ˆë‹¤.',
      'ì™„ë£Œëœ í”„ë¡œì íŠ¸ëŠ” ìŠ¤í°ì„œ ì¹´ë“œë„ ì œê³µí•©ë‹ˆë‹¤.'
    ],
    category: 'conservation_projects',
    difficulty_level: 'medium',
    tags: ['ë³´ì¡´í”„ë¡œì íŠ¸', 'ì™„ë£Œì¡°ê±´', 'ë³´ì¡´í¬ì¸íŠ¸', 'ìŠ¤í°ì„œì¹´ë“œ']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'X-í† í°ì€ ë¬´ì—‡ì´ê³  ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?',
    ideal_answer: 'X-í† í°ì€ ë‹¤ì–‘í•œ ìš©ë„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë²”ìš© ìì›ì…ë‹ˆë‹¤. ë™ë¬¼ êµ¬ë§¤, ì¸í´ë¡œì € ê±´ì„¤, ì•¡ì…˜ ê°•í™” ë“±ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. X-í† í°ì€ íŠ¹ì • ì•¡ì…˜ì´ë‚˜ ì¹´ë“œ íš¨ê³¼ë¥¼ í†µí•´ íšë“í•  ìˆ˜ ìˆìœ¼ë©°, ê²Œì„ ì¤‘ ì „ëµì ìœ¼ë¡œ í™œìš©í•´ì•¼ í•˜ëŠ” ì¤‘ìš”í•œ ìì›ì…ë‹ˆë‹¤.',
    ideal_context: [
      'X-í† í°ì€ ê²Œì„ì˜ ë²”ìš© ìì›ì…ë‹ˆë‹¤.',
      'ë™ë¬¼ êµ¬ë§¤, ê±´ì„¤, ì•¡ì…˜ ê°•í™” ë“±ì— ì‚¬ìš©ë©ë‹ˆë‹¤.',
      'íŠ¹ì • ì•¡ì…˜ì´ë‚˜ ì¹´ë“œ íš¨ê³¼ë¡œ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì „ëµì  ìì› ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.'
    ],
    category: 'resources',
    difficulty_level: 'easy',
    tags: ['Xí† í°', 'ìì›', 'ë™ë¬¼êµ¬ë§¤', 'ì¸í´ë¡œì €ê±´ì„¤']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ê²Œì„ì€ ì–¸ì œ ì¢…ë£Œë˜ë‚˜ìš”?',
    ideal_answer: 'ê²Œì„ì€ ë‹¤ìŒ ì¡°ê±´ ì¤‘ í•˜ë‚˜ê°€ ë§Œì¡±ë˜ë©´ ì¢…ë£Œë©ë‹ˆë‹¤: 1) í•œ í”Œë ˆì´ì–´ì˜ ì–´í•„ í¬ì¸íŠ¸ì™€ ë³´ì¡´ í¬ì¸íŠ¸ ë§ˆì»¤ê°€ ë§Œë‚˜ê±°ë‚˜ ì§€ë‚˜ì¹  ë•Œ, 2) ë™ë¬¼ ì¹´ë“œ ë”ë¯¸ê°€ ë–¨ì–´ì§ˆ ë•Œ, 3) ë³´ì¡´ í”„ë¡œì íŠ¸ ì¹´ë“œ ë”ë¯¸ê°€ ë–¨ì–´ì§ˆ ë•Œ. ê²Œì„ ì¢…ë£Œ ì¡°ê±´ì´ ë§Œì¡±ë˜ë©´ í˜„ì¬ ë¼ìš´ë“œë¥¼ ì™„ë£Œí•œ í›„ ê²Œì„ì´ ëë‚©ë‹ˆë‹¤.',
    ideal_context: [
      'ê²Œì„ ì¢…ë£Œ ì¡°ê±´ì€ ì„¸ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.',
      'ì–´í•„ í¬ì¸íŠ¸ì™€ ë³´ì¡´ í¬ì¸íŠ¸ ë§ˆì»¤ê°€ ë§Œë‚˜ë©´ ì¢…ë£Œë©ë‹ˆë‹¤.',
      'ë™ë¬¼ ì¹´ë“œë‚˜ ë³´ì¡´ í”„ë¡œì íŠ¸ ì¹´ë“œê°€ ë–¨ì–´ì ¸ë„ ì¢…ë£Œë©ë‹ˆë‹¤.',
      'ì¢…ë£Œ ì¡°ê±´ ë§Œì¡± ì‹œ í˜„ì¬ ë¼ìš´ë“œë¥¼ ì™„ë£Œí•©ë‹ˆë‹¤.'
    ],
    category: 'game_end',
    difficulty_level: 'easy',
    tags: ['ê²Œì„ì¢…ë£Œ', 'ì¢…ë£Œì¡°ê±´', 'ì–´í•„í¬ì¸íŠ¸', 'ë³´ì¡´í¬ì¸íŠ¸']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ìµœì¢… ì ìˆ˜ëŠ” ì–´ë–»ê²Œ ê³„ì‚°í•˜ë‚˜ìš”?',
    ideal_answer: 'ìµœì¢… ì ìˆ˜ëŠ” ì–´í•„ í¬ì¸íŠ¸ì™€ ë³´ì¡´ í¬ì¸íŠ¸ ì¤‘ ë‚®ì€ ì ìˆ˜ë¡œ ê²°ì •ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì–´í•„ í¬ì¸íŠ¸ê°€ 15ì ì´ê³  ë³´ì¡´ í¬ì¸íŠ¸ê°€ 12ì ì´ë¼ë©´ ìµœì¢… ì ìˆ˜ëŠ” 12ì ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ë‘ ì ìˆ˜ë¥¼ ê· í˜• ìˆê²Œ ë°œì „ì‹œí‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.',
    ideal_context: [
      'ìµœì¢… ì ìˆ˜ëŠ” ë‘ ì ìˆ˜ ì¤‘ ë‚®ì€ ì ìˆ˜ì…ë‹ˆë‹¤.',
      'ì–´í•„ í¬ì¸íŠ¸ì™€ ë³´ì¡´ í¬ì¸íŠ¸ë¥¼ ëª¨ë‘ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.',
      'ê· í˜• ì¡íŒ ì ìˆ˜ ë°œì „ì´ ìŠ¹ë¦¬ì˜ ì—´ì‡ ì…ë‹ˆë‹¤.',
      'í•œìª½ ì ìˆ˜ë§Œ ë†’ì•„ì„œëŠ” ìŠ¹ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
    ],
    category: 'scoring',
    difficulty_level: 'easy',
    tags: ['ìµœì¢…ì ìˆ˜', 'ì–´í•„í¬ì¸íŠ¸', 'ë³´ì¡´í¬ì¸íŠ¸', 'ê· í˜•']
  },
  {
    game_id: 'ARK_NOVA',
    question: 'ì†”ë¡œ ê²Œì„ì€ ì–´ë–»ê²Œ ì§„í–‰í•˜ë‚˜ìš”?',
    ideal_answer: 'ì†”ë¡œ ê²Œì„ì—ì„œëŠ” AI ìƒëŒ€ì™€ ê²½ìŸí•©ë‹ˆë‹¤. AIëŠ” ìë™í™”ëœ ê·œì¹™ì— ë”°ë¼ í–‰ë™í•˜ë©°, í”Œë ˆì´ì–´ëŠ” AIë³´ë‹¤ ë†’ì€ ì ìˆ˜ë¥¼ ì–»ì–´ì•¼ ìŠ¹ë¦¬í•©ë‹ˆë‹¤. ì†”ë¡œ ê²Œì„ì—ëŠ” ì—¬ëŸ¬ ë‚œì´ë„ ë ˆë²¨ì´ ìˆì–´ ë„ì „ì˜ ì •ë„ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    ideal_context: [
      'ì†”ë¡œ ê²Œì„ì—ì„œëŠ” AI ìƒëŒ€ì™€ ê²½ìŸí•©ë‹ˆë‹¤.',
      'AIëŠ” ì •í•´ì§„ ê·œì¹™ì— ë”°ë¼ ìë™ìœ¼ë¡œ í–‰ë™í•©ë‹ˆë‹¤.',
      'í”Œë ˆì´ì–´ëŠ” AIë³´ë‹¤ ë†’ì€ ì ìˆ˜ë¥¼ ì–»ì–´ì•¼ í•©ë‹ˆë‹¤.',
      'ì—¬ëŸ¬ ë‚œì´ë„ ë ˆë²¨ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
    ],
    category: 'solo_game',
    difficulty_level: 'medium',
    tags: ['ì†”ë¡œê²Œì„', 'AIìƒëŒ€', 'ë‚œì´ë„', 'ìë™í™”ê·œì¹™']
  }
];

/**
 * Golden Datasetì„ Supabaseì— ì‚½ì…
 */
async function seedGoldenDataset() {
  console.log('ğŸŒ± Golden Dataset ì‹œë“œ ë°ì´í„° ìƒì„± ì‹œì‘\n');
  
  try {
    // 1. ê¸°ì¡´ ë°ì´í„° í™•ì¸
    const { data: existingData, error: checkError } = await supabase
      .from('golden_dataset')
      .select('id')
      .eq('game_id', 'ARK_NOVA');
    
    if (checkError) {
      console.error('âŒ ê¸°ì¡´ ë°ì´í„° í™•ì¸ ì‹¤íŒ¨:', checkError.message);
      throw checkError;
    }
    
    if (existingData && existingData.length > 0) {
      console.log(`âš ï¸ ì´ë¯¸ ${existingData.length}ê°œì˜ ARK NOVA ë°ì´í„°ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.`);
      const readline = require('readline');
      const rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout
      });
      
      const answer = await new Promise(resolve => {
        rl.question('ê¸°ì¡´ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³  ìƒˆë¡œ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/N): ', resolve);
      });
      
      rl.close();
      
      if (answer.toLowerCase() !== 'y' && answer.toLowerCase() !== 'yes') {
        console.log('âŒ ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        return;
      }
      
      // ê¸°ì¡´ ë°ì´í„° ì‚­ì œ
      const { error: deleteError } = await supabase
        .from('golden_dataset')
        .delete()
        .eq('game_id', 'ARK_NOVA');
      
      if (deleteError) {
        console.error('âŒ ê¸°ì¡´ ë°ì´í„° ì‚­ì œ ì‹¤íŒ¨:', deleteError.message);
        throw deleteError;
      }
      
      console.log('ğŸ—‘ï¸ ê¸°ì¡´ ë°ì´í„° ì‚­ì œ ì™„ë£Œ');
    }
    
    // 2. ìƒˆ ë°ì´í„° ì‚½ì…
    console.log(`ğŸ“ ${GOLDEN_DATASET.length}ê°œì˜ ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‚½ì… ì¤‘...`);
    
    const { data, error } = await supabase
      .from('golden_dataset')
      .insert(GOLDEN_DATASET)
      .select();
    
    if (error) {
      console.error('âŒ ë°ì´í„° ì‚½ì… ì‹¤íŒ¨:', error.message);
      throw error;
    }
    
    console.log(`âœ… ${data.length}ê°œì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    
    // 3. ì‚½ì…ëœ ë°ì´í„° í†µê³„ ì¶œë ¥
    const categoryStats = {};
    const difficultyStats = {};
    
    for (const item of data) {
      categoryStats[item.category] = (categoryStats[item.category] || 0) + 1;
      difficultyStats[item.difficulty_level] = (difficultyStats[item.difficulty_level] || 0) + 1;
    }
    
    console.log('\nğŸ“Š ì‚½ì…ëœ ë°ì´í„° í†µê³„:');
    console.log('ì¹´í…Œê³ ë¦¬ë³„:');
    Object.entries(categoryStats).forEach(([category, count]) => {
      console.log(`  - ${category}: ${count}ê°œ`);
    });
    
    console.log('ë‚œì´ë„ë³„:');
    Object.entries(difficultyStats).forEach(([difficulty, count]) => {
      console.log(`  - ${difficulty}: ${count}ê°œ`);
    });
    
    console.log('\nğŸ‰ Golden Dataset ì‹œë“œ ë°ì´í„° ìƒì„± ì™„ë£Œ!');
    console.log('\nğŸ’¡ ë‹¤ìŒ ë‹¨ê³„:');
    console.log('1. npm run process-rulebook ì‹¤í–‰í•˜ì—¬ ë¬¸ì„œ ì„ë² ë”© ìƒì„±');
    console.log('2. npm run evaluate-rag ì‹¤í–‰í•˜ì—¬ í‰ê°€ í…ŒìŠ¤íŠ¸');
    console.log('3. GitHub Actions ì›Œí¬í”Œë¡œìš° í™•ì¸');
    
  } catch (error) {
    console.error('âŒ Golden Dataset ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error.message);
    console.error(error.stack);
    process.exit(1);
  }
}

/**
 * ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„± ë„ìš°ë¯¸ í•¨ìˆ˜
 */
function generateAdditionalTestCase(question, idealAnswer, idealContext, category, difficulty, tags) {
  return {
    game_id: 'ARK_NOVA',
    question,
    ideal_answer: idealAnswer,
    ideal_context: Array.isArray(idealContext) ? idealContext : [idealContext],
    category,
    difficulty_level: difficulty,
    tags: Array.isArray(tags) ? tags : [tags]
  };
}

/**
 * ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜
 */
async function main() {
  await seedGoldenDataset();
}

// ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
if (require.main === module) {
  main();
}

module.exports = {
  seedGoldenDataset,
  generateAdditionalTestCase,
  GOLDEN_DATASET
};